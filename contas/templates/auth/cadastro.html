{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crie sua Conta | Paciente | PsiAcesso</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static 'globals.css' %}" />
    <link rel="stylesheet" href="{% static 'login.css' %}" />
    <link rel="stylesheet" href="{% static 'cadastro.css' %}" />
</head>
<body>
    
    <div class="main-cadastro-container d-flex">
        
        {# Lado esquerdo - Branding (como no login) #}
        <div class="branding-sidebar d-none d-lg-flex flex-column justify-content-center align-items-center">
            <div class="branding-content text-center">
                <div class="logo-icon"><i class="fas fa-brain"></i></div>
                <h1 class="mt-2 text-white">PsiAcesso</h1>
                <p class="slogan text-white">Conectando mentes, transformando vidas</p>
                <div class="features-list mt-5">
                    <p><i class="fas fa-lock me-3"></i> Ambiente seguro e confidencial</p>
                    <p><i class="fas fa-user-tie me-3"></i> Profissionais qualificados</p>
                    <p><i class="fas fa-heart me-3"></i> Cuidado personalizado</p>
                </div>
            </div>
        </div>

        {# Lado direito - Formulário de Cadastro #}
        <div class="cadastro-form-content flex-grow-1 d-flex justify-content-center align-items-center">
            <div class="cadastro-form-box">
                <h2 class="form-title">Criar Conta</h2>
                <p class="form-subtitle text-muted">Preencha os dados para começar sua jornada</p>

                <form method="post">
                    {% csrf_token %}

                    {# Exibe erros gerais (non-field errors) #}
                    {% if user_form.non_field_errors %}
                        <div class="alert alert-danger" role="alert">
                            {{ user_form.non_field_errors }}
                        </div>
                    {% endif %}
                    {% if address_form.non_field_errors %}
                        <div class="alert alert-danger" role="alert">
                            {{ address_form.non_field_errors }}
                        </div>
                    {% endif %}

                    {# Seção de Informações Pessoais #}
                    <div class="form-section-header">
                        <i class="fas fa-user icon-muted me-2"></i>
                        <span>Informações Pessoais</span>
                    </div>
                    <div class="row mb-3 gx-3">
                        
                        <div class="col-md-6 mb-3">
                            <label for="{{ user_form.first_name.id_for_label }}" class="form-label">{{ user_form.first_name.label }} <span class="required-asterisk">*</span></label>
                            {{ user_form.first_name }}
                            {% if user_form.first_name.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.first_name.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="{{ user_form.last_name.id_for_label }}" class="form-label">{{ user_form.last_name.label }} <span class="required-asterisk">*</span></label>
                            {{ user_form.last_name }}
                            {% if user_form.last_name.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.last_name.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="{{ user_form.email.id_for_label }}" class="form-label">{{ user_form.email.label }} <span class="required-asterisk">*</span></label>
                            {{ user_form.email }}
                            {% if user_form.email.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.email.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="{{ user_form.cpf.id_for_label }}" class="form-label">{{ user_form.cpf.label }} <span class="required-asterisk">*</span></label>
                            {{ user_form.cpf }}
                            {% if user_form.cpf.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.cpf.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="col-12 mb-3">
                            <label for="{{ user_form.gender.id_for_label }}" class="form-label">{{ user_form.gender.label }}</label>
                            {{ user_form.gender }}
                            {% if user_form.gender.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.gender.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    {# Seção de Endereço #}
                    <div class="form-section-header mt-4">
                        <i class="fas fa-map-marker-alt icon-muted me-2"></i>
                        <span>Endereço</span>
                    </div>
                    <div class="row mb-3 gx-3">
                        <div class="col-md-8 mb-3">
                            <label for="{{ address_form.rua.id_for_label }}" class="form-label">{{ address_form.rua.label }} <span class="required-asterisk">*</span></label>
                            {{ address_form.rua }}
                            {% if address_form.rua.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.rua.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="{{ address_form.numero.id_for_label }}" class="form-label">{{ address_form.numero.label }} <span class="required-asterisk">*</span></label>
                            {{ address_form.numero }}
                             {% if address_form.numero.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.numero.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="{{ address_form.complemento.id_for_label }}" class="form-label">{{ address_form.complemento.label }}</label>
                            {{ address_form.complemento }}
                             {% if address_form.complemento.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.complemento.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="{{ address_form.bairro.id_for_label }}" class="form-label">{{ address_form.bairro.label }} <span class="required-asterisk">*</span></label>
                            {{ address_form.bairro }}
                             {% if address_form.bairro.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.bairro.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="{{ address_form.cidade.id_for_label }}" class="form-label">{{ address_form.cidade.label }} <span class="required-asterisk">*</span></label>
                            {{ address_form.cidade }}
                            {% if address_form.cidade.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.cidade.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="{{ address_form.estado.id_for_label }}" class="form-label">{{ address_form.estado.label }} <span class="required-asterisk">*</span></label>
                            {# Este <select> é manual para usar a lista completa de UFs do seu HTML original #}
                            <select name="{{ address_form.estado.name }}" id="{{ address_form.estado.id_for_label }}" class="form-select" required>
                                <option value="">UF</option>
                                <option value="AC" {% if address_form.estado.value == "AC" %}selected{% endif %}>AC</option>
                                <option value="AL" {% if address_form.estado.value == "AL" %}selected{% endif %}>AL</option>
                                <option value="AP" {% if address_form.estado.value == "AP" %}selected{% endif %}>AP</option>
                                <option value="AM" {% if address_form.estado.value == "AM" %}selected{% endif %}>AM</option>
                                <option value="BA" {% if address_form.estado.value == "BA" %}selected{% endif %}>BA</option>
                                <option value="CE" {% if address_form.estado.value == "CE" %}selected{% endif %}>CE</option>
                                <option value="DF" {% if address_form.estado.value == "DF" %}selected{% endif %}>DF</option>
                                <option value="ES" {% if address_form.estado.value == "ES" %}selected{% endif %}>ES</option>
                                <option value="GO" {% if address_form.estado.value == "GO" %}selected{% endif %}>GO</option>
                                <option value="MA" {% if address_form.estado.value == "MA" %}selected{% endif %}>MA</option>
                                <option value="MT" {% if address_form.estado.value == "MT" %}selected{% endif %}>MT</option>
                                <option value="MS" {% if address_form.estado.value == "MS" %}selected{% endif %}>MS</option>
                                <option value="MG" {% if address_form.estado.value == "MG" %}selected{% endif %}>MG</option>
                                <option value="PA" {% if address_form.estado.value == "PA" %}selected{% endif %}>PA</option>
                                <option value="PB" {% if address_form.estado.value == "PB" %}selected{% endif %}>PB</option>
                                <option value="PR" {% if address_form.estado.value == "PR" %}selected{% endif %}>PR</option>
                                <option value="PE" {% if address_form.estado.value == "PE" %}selected{% endif %}>PE</option>
                                <option value="PI" {% if address_form.estado.value == "PI" %}selected{% endif %}>PI</option>
                                <option value="RJ" {% if address_form.estado.value == "RJ" %}selected{% endif %}>RJ</option>
                                <option value="RN" {% if address_form.estado.value == "RN" %}selected{% endif %}>RN</option>
                                <option value="RS" {% if address_form.estado.value == "RS" %}selected{% endif %}>RS</option>
                                <option value="RO" {% if address_form.estado.value == "RO" %}selected{% endif %}>RO</option>
                                <option value="RR" {% if address_form.estado.value == "RR" %}selected{% endif %}>RR</option>
                                <option value="SC" {% if address_form.estado.value == "SC" %}selected{% endif %}>SC</option>
                                <option value="SP" {% if address_form.estado.value == "SP" %}selected{% endif %}>SP</option>
                                <option value="SE" {% if address_form.estado.value == "SE" %}selected{% endif %}>SE</option>
                                <option value="TO" {% if address_form.estado.value == "TO" %}selected{% endif %}>TO</option>
                            </select>
                             {% if address_form.estado.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.estado.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="{{ address_form.cep.id_for_label }}" class="form-label">{{ address_form.cep.label }} <span class="required-asterisk">*</span></label>
                            {{ address_form.cep }}
                             {% if address_form.cep.errors %}
                                <div class="invalid-feedback d-block">{{ address_form.cep.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    {# Seção de Segurança #}
                    <div class="form-section-header mt-4">
                        <i class="fas fa-lock icon-muted me-2"></i>
                        <span>Segurança</span>
                    </div>
                    <div class="row gx-3">
                        <div class="col-md-6 mb-3">
                            <label for="{{ user_form.password.id_for_label }}" class="form-label">{{ user_form.password.label }} <span class="required-asterisk">*</span></label>
                            {{ user_form.password1 }}
                             {% if user_form.password.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.password.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="{{ user_form.password2.id_for_label }}" class="form-label">{{ user_form.password2.label }} <span class="required-asterisk">*</span></label>
                            {{ user_form.password2 }}
                             {% if user_form.password2.errors %}
                                <div class="invalid-feedback d-block">{{ user_form.password2.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-check my-3">
                        <input class="form-check-input" type="checkbox" id="terms_privacy" required>
                        <label class="form-check-label terms-privacy-text" for="terms_privacy">
                            Aceito os <a href="#" class="privacy-link">Termos de Uso</a> e <a href="#" class="privacy-link">Política de Privacidade</a>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-cadastro w-100">Criar Conta</button>

                    <p class="text-center mt-3 login-prompt">
                        Já possui uma conta? <a href="{% url 'login' %}" class="login-link">Fazer login</a>
                    </p>
                </form>
            </div>
        </div>
    </div>
  </body>
</html>