{% extends 'base.html' %}
{% load static %}

{% block title %}Meu Perfil - PsiConnect{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'perfil-paciente.css' %}">
{% endblock %}

{% block content %}
<div class="profile-container">

    <div class="page-header">
        <div>
            <h2>Meu Perfil</h2>
            <p>Gerencie suas informações pessoais e preferências</p>
        </div>
        <a href="{% url 'editar_perfil_paciente' %}" class="btn-dark-outline" style="text-decoration: none; display: inline-flex; align-items: center;">
            <span class="material-icons" style="font-size: 18px; margin-right: 5px">edit</span> Editar Perfil
        </a>
    </div>

    <div class="profile-layout">
        
        <aside class="profile-sidebar">
            <div class="card user-card">
                <div class="profile-image-wrapper">
                    {% if user.profile.photo %}
                        <img src="{{ user.profile.photo.url }}" alt="Foto de {{ user.first_name }}">
                    {% else %}
                        <img src="https://placehold.co/150x150/png?text={{ user.first_name|first }}" alt="Sem foto">
                    {% endif %}
                </div>

                <h3 class="user-name">{{ user.first_name }} {{ user.last_name }}</h3>
                <p class="user-since">Usuário desde {{ user.date_joined|date:"F Y" }}</p>

                <div class="verified-badge">
                    <span class="material-icons">check_circle</span>
                    Perfil Verificado
                </div>
            </div>
        </aside>

        <main class="profile-content">
            
            <div class="card form-section">
                
                {% if messages %}
                    {% for message in messages %}
                        <div style="padding: 10px; margin: 10px 0; border-radius: 4px; background-color: #d4edda; color: #155724;">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}

                <div class="card-header">
                    <h3><span class="material-icons">person</span> Informações Pessoais</h3>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Nome Completo</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ user.first_name }} {{ user.last_name }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Data de Nascimento</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ paciente.data_nascimento|date:"d/m/Y" }}
                        </div>
                    </div>

                    <div class="form-group">
                        <label>E-mail</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ user.email }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Telefone</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ paciente.telefone|default:"-" }}
                        </div>
                    </div>

                    <div class="form-group">
                        <label>CPF</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ paciente.cpf|default:"-" }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label>CEP</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ paciente.cep|default:"-" }}
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label>Endereço Completo</label>
                        <div class="form-input" style="display: flex; align-items: center;">
                            {{ paciente.endereco|default:"-" }}
                        </div>
                    </div>
                </div>

                <div class="form-footer">
                    <span class="last-update">Última atualização: Hoje</span>
                    </div>
            </div>

            <div class="bottom-grid">
                
                <div class="card small-card">
                    <div class="card-header">
                        <h3><span class="material-icons">security</span> Privacidade e Segurança</h3>
                    </div>
                    <ul class="settings-list">
                        <li>
                            <span>Verificação em duas etapas</span>
                            <span class="badge badge-green">Ativado</span>
                        </li>
                        <li>
                            <span>Notificações por e-mail</span>
                            <span class="badge badge-gray">Desativado</span>
                        </li>
                        <li>
                            <a href="#" class="link-action">Alterar senha</a>
                        </li>
                    </ul>
                </div>

                <div class="card small-card">
                    <div class="card-header">
                        <h3><span class="material-icons">settings</span> Preferências</h3>
                    </div>
                    <ul class="settings-list">
                        <li>
                            <span>Tema escuro</span>
                            <span class="badge badge-gray">Desativado</span>
                        </li>
                        <li>
                            <span>Idioma</span>
                            <span class="text-detail">Português (BR)</span>
                        </li>
                        <li>
                            <span>Fuso horário</span>
                            <span class="text-detail">GMT-3</span>
                        </li>
                    </ul>
                </div>

            </div>
            </main>
    </div>
</div>
{% endblock %}