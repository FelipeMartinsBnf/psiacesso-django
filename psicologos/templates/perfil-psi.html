{% extends 'base.html' %}
{% load static %}

{% block title %}Perfil de {{ psi.usuario.first_name }} - PsiConnect{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'perfil-psi.css' %}">
{% endblock %}

{% block content %}
<div class="profile-container">

    <aside class="profile-sidebar">
        <div class="card profile-summary">
            <div class="profile-image-wrapper">
                {% if psi.foto %}
                    <img src="{{ psi.foto.url }}" alt="Foto de {{ psi.usuario.first_name }}">
                {% else %}
                    <img src="https://placehold.co/150x150/6A994E/FFFFFF?text={{ psi.usuario.first_name.0 }}" alt="Sem foto">
                {% endif %}
                
                <button class="btn-icon camera-icon">üì∑</button>
            </div>

            <h2 class="profile-name">
                Dra. {{ psi.usuario.first_name }} {{ psi.usuario.last_name }}
            </h2>
            <p class="profile-specialty">{{ psi.especialidade.nome|default:"Psic√≥loga Cl√≠nica" }}</p>

            <div class="profile-rating">
                <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                <span class="rating-value">5.0/5.0</span>
            </div>

            <div class="sidebar-actions">
                <a href="{% url 'agendar_consulta' psi.id %}" class="btn btn-primary full-width">
                    Agendar Consulta
                </a>
                <button class="btn btn-outline full-width" style="margin-top: 10px;">
                    Editar Perfil
                </button>
            </div>
        </div>
    </aside>

    <main class="profile-content">

        <section class="card info-section">
            <div class="card-header">
                <h3>Informa√ß√µes Pessoais</h3>
                <button class="btn-icon-small">‚úèÔ∏è</button>
            </div>
            
            <div class="info-grid">
                <div class="info-item">
                    <label>Nome Completo</label>
                    <p>{{ psi.usuario.first_name }} {{ psi.usuario.last_name }}</p>
                </div>
                <div class="info-item">
                    <label>Telefone</label>
                    <p>{{ psi.telefone|default:"(11) 99999-9999" }}</p>
                </div>
                <div class="info-item">
                    <label>E-mail Profissional</label>
                    <p>{{ psi.usuario.email }}</p>
                </div>
                <div class="info-item">
                    <label>CRP</label>
                    <p>{{ psi.crp }}</p>
                </div>
                <div class="info-item">
                    <label>CPF</label>
                    <p>{{ psi.cpf|default:"N√£o informado" }}</p>
                </div>
                <div class="info-item">
                    <label>Pre√ßo da Consulta</label>
                    <p>R$ {{ psi.preco_consulta }}</p>
                </div>
            </div>
        </section>

        <section class="card address-section">
            <div class="card-header">
                <h3>Endere√ßo do Consult√≥rio</h3>
                <button class="btn-icon-small">‚úèÔ∏è</button>
            </div>
            
            <div class="address-content">
                <div class="icon-location">üìç</div>
                <div class="address-text">
                    <p><strong>{{ psi.endereco|default:"Endere√ßo n√£o cadastrado" }}</strong></p>
                    <p>Atendimento: 
                        {% if psi.atendimento_online %}Online{% endif %}
                        {% if psi.atendimento_online and psi.atendimento_presencial %} & {% endif %}
                        {% if psi.atendimento_presencial %}Presencial{% endif %}
                    </p>
                </div>
            </div>
        </section>

        <section class="card education-section">
            <div class="card-header">
                <h3>Forma√ß√£o e Qualifica√ß√µes</h3>
                <button class="btn-icon-small">‚ûï</button>
            </div>

            <div class="education-list">
                {% for formacao in formacoes %}
                <div class="education-item">
                    <div class="education-icon">
                        {% if formacao.tipo == 0 %}üéì{% else %}üèÖ{% endif %}
                    </div>
                    <div class="education-details">
                        <h4>{{ formacao.nome }}</h4>
                        <p>{{ formacao.descricao }}</p>
                    </div>
                </div>
                {% empty %}
                <p style="padding: 15px; color: #666;">Nenhuma forma√ß√£o cadastrada.</p>
                {% endfor %}
            </div>
        </section>

    </main>
</div>
{% endblock %}